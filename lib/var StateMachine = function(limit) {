

Table.prototype.gameLoop = function() {
    this.on('nextState', function(state) {
        thi
    });

    this.on('preflop', function() {
        this.potSize = this.smallBet + this.smallBet / 2;
        currentPlayer = this.nextSeat(this.button.seatNumber);
        currentPlayer.player.loseChips(this.smallBet / 2);
        currentPlayer = this.nextSeat(currentPlayer.seatNumber);
        currentPlayer.player.loseChips(this.smallBet);

        currentPlayer = this.nextSeat(currentPlayer.seatNumber);
        currentPlayer.player.getAction();

    });

    this.on('flop', function() {

    });

    this.on('turn', function() {

    });

    this.on('river', function() {

    });

    this.on('showdown', function() {

    });

    this.on('action', function(type, player) {
        switch(type) {
        case 'raise':
            this.increasePot();
            break;
        case 'call':
            this.increasePot();
            break;
        case 'check':
            break;
        case 'fold':
            this.currentPlayer.folded = true;
            break;
        }

        this.emit('nextSeat')
    });

    this.on('nextPlayer', function() {
        
    });

    this.on('nextState', function() {
        this.emit(this.stateMachine.nextState())
    });
}

var GameLoop = function() {
    
}

Game Loop
=========

Start if numPlayer == 2
End if numPlayers < 2

PREFLOP
=======
take half smallbet from SB
take smallbet from BB
deal cards from Button to Button - 1
    Betting Round
    =============
    lastToRaise = BB
    accept actions from BB + 1 to lastToRaise (skipping players who folded)
    if (action == raise) lastToRaise = player who did action

FLOP
====
Deal flop cards
    Betting Round
    =============
    lastToRaise = BB
    accept actions from BB + 1 to lastToRaise (skipping players who folded)
    if (action == raise) lastToRaise = player who did action

TURN
====
Deal turn card
    Betting Round
    =============
    lastToRaise = BB
    accept actions from BB + 1 to lastToRaise (skipping players who folded)
    if (action == raise) lastToRaise = player who did action

RIVER
=====
Deal river card
    Betting Round
    =============
    lastToRaise = BB
    accept actions from BB + 1 to lastToRaise (skipping players who folded)
    if (action == raise) lastToRaise = player who did action

SHOWDOWN
========
Determine winning hand
pot goes to winner
reset
loop